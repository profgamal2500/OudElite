// ?????? ???????? ????????
let _celebrationAudio = null;
let _isMusicEnabled = true;

function playCelebrationMusic() {
    // ?????? ?? ????? ????????
    if (!_isMusicEnabled) {
        console.log('???????? ?????????? ?????');
        return;
    }
    
    // ????? ?? ?????? ?????
    stopCelebrationMusic();
    
    const celebrationSounds = ['mu.mp4'];
    
    _celebrationAudio = new Audio(celebrationSounds[0]);
    _celebrationAudio.volume = 0.3;
    _celebrationAudio.loop = true;
    
    _celebrationAudio.play().catch(e => {
        console.log('?? ??? ????? ???????? ??????????:', e);
    });
}

function stopCelebrationMusic() {
    if (_celebrationAudio) {
        _celebrationAudio.pause();
        _celebrationAudio.currentTime = 0;
        _celebrationAudio = null;
    }
}

function setMusicEnabled(enabled) {
    _isMusicEnabled = enabled;
    if (!enabled) {
        stopCelebrationMusic();
    }
}

function isMusicEnabled() {
    return _isMusicEnabled;
}

// ????? ?????? ???????
window.playCelebrationMusic = playCelebrationMusic;
window.stopCelebrationMusic = stopCelebrationMusic;
window.setMusicEnabled = setMusicEnabled;
window.isMusicEnabled = isMusicEnabled;
